<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width,minimum-scale=1,initial-scale=1">
    <title>Watson Health Playbook</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/assets/img/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/img/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/assets/img/favicon/manifest.json">
    <link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/assets/img/favicon/favicon.ico">
    <meta name="msapplication-config" content="/assets/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/assets/css/main.css"></link>
    <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">

  </head>
  <body>
    <div class="disclaimer">
      Jira, Confluence, Xray and Aha workflows are still being developed and are not production ready yet. Training on tools and process will be made available when ready.
    </div>
    <div class="app-chrome">
      <header class="app-chrome__header">
        <a href="/"
           class="logo"
           rel="home">
          <img src="/assets/img/playbook-logo-white-transparent.png"
               alt="The Watson Health Playbook"
               class="logo__image"><span class="logo__text">Watson Health Playbook</span>
        </a>
      </header>
      <main class="content app-chrome__main-content">
        <nav class="content__nav">
            <a class="content__nav-link u-icon u-icon--before u-icon--search"
            href="/search.html">
              Search
            </a>
          <a class="content__nav-link u-icon u-icon--before u-icon--bug" target="_blank"
             href="https://github.ibm.com/watson-health-playbook/watson-health-playbook.github.ibm.com/issues/new?title=%3Creplace%20with%20a%20description%3E&body=Description:%0A%0ASteps%20to%20Reproduce:%0A%0A%0A%0ABrowser:%0A%0AOS:%0A%0A%0A%0A%23playbook-bug&labels[]=bug">
            Report an Issue or provide Feedback
          </a>
          <!--
          <a class="content__nav-link u-icon u-icon--before u-icon--pencil" target="_blank"
             href="https://github.ibm.com/watson-health-playbook/watson-health-playbook.github.ibm.com/edit/master/_content/tools/xray/xray_cuke_testresults.md">
            Propose a Change
          </a>
        -->

          <a class="content__nav-link u-icon u-icon--before u-icon--thumbs-up"
             href="/nps/get-nps">
            How are we doing?
          </a>
        </nav>
          


  
  
  
    
  
    
  
    
  

  
  








<header class="content__header">
  <!-- <p class="content__section"></p> -->
  <h1 class="content__heading">Generating Cucumber Test results in the Xray Environment</h1>
  <div class="breadcrumb">
    <div id="breadcrumbs">
<!-- Grab the current full path and split it up -->


<!-- Don't put the "Top" tag on the root page, it isn't needed -->

<a href="/">Top</a>



  
  <!-- otherwise, create the crumb list -->
    / <a href="/tools/">tools</a>
  

  
  <!-- otherwise, create the crumb list -->
    / <a href="/tools/xray/">xray</a>
  

  
    <!-- If a breadcrumb exists, then use that always -->
    
      / Cucumber Test results
    
  

</div>

  </div>
</header>

  <section class="content__body-text">
    <h1 id="draft">DRAFT</h1>

<p>Cucumber can be configured to produce test pass/fail log output in either HTML or JSON format.</p>

<h2 id="generating-log-output-in-html-format">Generating Log Output in HTML format</h2>
<p>In addition to running Cucumber tests individually from the command line or via .sh script, to enable Cucumber HTML output when running from the Eclipse client, ensure the following runtime option is added to your test runner code. In the context of this document, runTest.java contains the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">cucumberreport</span><span class="p">;</span>

<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">junit</span><span class="p">.</span><span class="n">runner</span><span class="p">.</span><span class="n">RunWith</span><span class="p">;</span>
<span class="n">import</span> <span class="n">cucumber</span><span class="p">.</span><span class="n">junit</span><span class="p">.</span><span class="n">Cucumber</span><span class="p">;</span>

<span class="p">@</span><span class="n">RunWith</span><span class="p">(</span><span class="n">Cucumber</span><span class="p">.</span><span class="n">class</span><span class="p">)</span>
<span class="p">//</span><span class="k">Set</span> <span class="nb">log</span> <span class="n">output</span> <span class="n">HTML</span> <span class="n">format</span> <span class="k">in</span> <span class="n">your</span> <span class="n">Eclipse</span> <span class="n">project</span> <span class="n">target</span><span class="p">/</span><span class="n">Destination</span> <span class="n">folder</span>
<span class="p">@</span><span class="n">Cucumber</span><span class="p">.</span><span class="k">Options</span><span class="p">(</span>
		   <span class="n">format</span> <span class="p">=</span> <span class="p">{</span><span class="s2">"pretty"</span><span class="p">,</span> <span class="s2">"html:target/Destination"</span><span class="p">}</span> <span class="p">)</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">runTest</span> <span class="p">{</span>

<span class="p">}</span>
</code></pre></div></div>

<p>At the completion of your test, log output in HTML format will be generated in your projects target/Destination folder as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/Users/lewiswhite/pythonscripts/cucumberReport/target/Destination
Lewiss-MacBook-Pro:Destination lewiswhite$ ls  index.html
index.html
</code></pre></div></div>

<p>Opening the file with a web browser (Chrome in this case) yields the following:</p>

<p><img src="https://pages.github.ibm.com/watson-health-playbook/resources/images/tools/xray/test_log_output.jpg" alt="Cucumber Log Output" /></p>

<h2 id="generating-log-output-in-json-format">Generating Log Output in JSON format</h2>

<p>To enable Cucumber JSON log output when running from the Eclipse client, ensure the following runtime option is added to your test runner code. In the context of this document, runTest.java contains the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">cucumberreport</span><span class="p">;</span>

<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">junit</span><span class="p">.</span><span class="n">runner</span><span class="p">.</span><span class="n">RunWith</span><span class="p">;</span>
<span class="n">import</span> <span class="n">cucumber</span><span class="p">.</span><span class="n">junit</span><span class="p">.</span><span class="n">Cucumber</span><span class="p">;</span>

<span class="p">@</span><span class="n">RunWith</span><span class="p">(</span><span class="n">Cucumber</span><span class="p">.</span><span class="n">class</span><span class="p">)</span>
<span class="p">//</span><span class="k">Set</span> <span class="nb">log</span> <span class="n">output</span> <span class="k">to</span> <span class="n">JSON</span> <span class="n">format</span> <span class="k">and</span> <span class="n">export</span> <span class="k">to</span> <span class="n">the</span> <span class="n">projects</span> <span class="n">target</span><span class="p">/</span><span class="n">Destination</span> <span class="n">folder</span>
<span class="p">@</span><span class="n">Cucumber</span><span class="p">.</span><span class="k">Options</span><span class="p">(</span>
<span class="n">format</span> <span class="p">=</span> <span class="p">{</span><span class="s2">"json:target/Destination/cucumber.json"</span><span class="p">}</span> <span class="p">)</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">runTest</span> <span class="p">{</span>

<span class="p">}</span>
</code></pre></div></div>

<p>At the completion of your test, log output in JSON format will be generated in the target/Destination folder of your project as follows:</p>
<blockquote>
  <p>Note: The following JSON has been made human readable, normally it is returned as a single line of code.</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
  {
    "comments": [
      {
        "line": 1,
        "value": "#This is to check test result for Pass test case"
      },
      {
        "line": 2,
        "value": "#Feature:  Successful User Login"
      },
      {
        "line": 3,
        "value": "#Scenario: Login functionality exists"
      },
      {
        "line": 4,
        "value": "#    Given I have opened the browser"
      },
      {
        "line": 5,
        "value": "#   When I open Facebook website"
      },
      {
        "line": 6,
        "value": "#    Then Login button should exist"
      },
      {
        "line": 8,
        "value": "#This is to check test result for Failed test case"
      }
    ],
    "line": 9,
    "elements": [
      {
        "line": 10,
        "name": "Forgot password exists",
        "description": "",
        "id": "failed-user-login;forgot-password-exists",
        "type": "scenario",
        "keyword": "Scenario",
        "steps": [
          {
            "result": {
              "duration": 507398030,
              "error_message": "org.openqa.selenium.WebDriverException: Cannot find firefox binary in PATH. Make sure firefox is installed. OS appears to be: MAC\nBuild info: version: '2.47.1', revision: 'unknown', time: '2015-07-30 11:02:44'\nSystem info: host: 'Lewiss-MacBook-Pro.local', ip: '192.168.0.5', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.14', java.version: '1.8.0_151'\nDriver info: driver.version: FirefoxDriver\n\tat org.openqa.selenium.firefox.internal.Executable.&lt;init&gt;(Executable.java:74)\n\tat org.openqa.selenium.firefox.FirefoxBinary.&lt;init&gt;(FirefoxBinary.java:60)\n\tat org.openqa.selenium.firefox.FirefoxBinary.&lt;init&gt;(FirefoxBinary.java:56)\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:125)\n\tat cucumberreport.cucumberReport.openBrowser(cucumberReport.java:16)\n\tat ✽.Given I have open the browser(cucumberreport/cucumberReport.feature:11)\n",
              "status": "failed"
            },
            "line": 11,
            "name": "I have open the browser",
            "match": {
              "location": "cucumberReport.openBrowser()"
            },
            "keyword": "Given "
          },
          {
            "result": {
              "status": "skipped"
            },
            "line": 12,
            "name": "I open Facebook website",
            "match": {
              "location": "cucumberReport.goToFacebook()"
            },
            "keyword": "When "
          },
          {
            "result": {
              "status": "skipped"
            },
            "line": 13,
            "name": "Forgot password link should exist",
            "match": {
              "location": "cucumberReport.forgotPWD()"
            },
            "keyword": "Then "
          }
        ]
      }
    ],
    "name": "Failed User Login",
    "description": "",
    "id": "failed-user-login",
    "keyword": "Feature",
    "uri": "cucumberreport/cucumberReport.feature"
  }
]
</code></pre></div></div>

<p>References for Xray and Cucumber Reporting:</p>

<ul>
  <li><a href="https://confluence.xpand-it.com/display/XRAY/Import+Execution+Results+-+REST#ImportExecutionResults-REST-ImportingExecutionResults" target="_blank">https://confluence.xpand-it.com/display/XRAY/Import+Execution+Results+-+REST#ImportExecutionResults-REST-ImportingExecutionResults</a></li>
  <li><a href="https://docs.cucumber.io/cucumber/reporting/" target="_blank">https://docs.cucumber.io/cucumber/reporting/</a></li>
  <li><a href="https://www.tutorialspoint.com/cucumber/cucumber_debugging.htm" target="_blank">https://www.tutorialspoint.com/cucumber/cucumber_debugging.htm</a></li>
</ul>

<h2 id="cucumber-json-test-reporting-with-jenkins">Cucumber JSON Test Reporting with Jenkins</h2>

<p>To configure Cucumber JSON test reporting with Jenkins, the <a href="https://wiki.jenkins.io/display/JENKINS/Cucumber+Test+Result+Plugin" target="_blank">Cucumber Test Result Plugin</a> for Jenkins is required.</p>

<h3 id="running-xray-generic-automation-tests">Running Xray Generic Automation Tests</h3>

<p>From an Xray plugin perspective, tests written in a language other than Cucumber are viewed as <em>Generic</em> tests.</p>

<p>For general Xray guidance, see <a href="https://confluence.xpand-it.com/display/XRAY/Using+Generic+Tests+for+Automation">https://confluence.xpand-it.com/display/XRAY/Using+Generic+Tests+for+Automation</a>.</p>

<p>Good example showing how to reference your test script written in a language other than Cucumber to run in Travis CI, and send the result to Xray for reporting</p>
<ul>
  <li><a href="https://github.com/softwaresaved/build_and_test_examples/blob/master/travis/HelloWorld.md">https://github.com/softwaresaved/build_and_test_examples/blob/master/travis/HelloWorld.md</a></li>
</ul>

<h3 id="recommended-values-when-creating-tests">Recommended values when creating Tests</h3>

<table>
  <thead>
    <tr>
      <th><strong>Tab</strong></th>
      <th><strong>Field</strong></th>
      <th><strong>Sample Value</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>General</td>
      <td>Environment</td>
      <td>Chrome</td>
    </tr>
    <tr>
      <td> </td>
      <td>Labels</td>
      <td>wh-&lt;offering&gt;-v1</td>
    </tr>
    <tr>
      <td> </td>
      <td>Test Repository Path</td>
      <td> </td>
    </tr>
    <tr>
      <td>Test Details</td>
      <td>Test Type</td>
      <td>Manual Cucumber (automated) Generic (automated)</td>
    </tr>
    <tr>
      <td> </td>
      <td>Generic Test Definition</td>
      <td>&lt;tag&gt; or &lt;test name&gt;</td>
    </tr>
  </tbody>
</table>

<h3 id="integrating-xray-with-jenkins">Integrating Xray with Jenkins</h3>

<p>Request Jenkins instance via <a href="https://pages.github.ibm.com/TAAS/tools_guide/introduction/taas-info.html" target="_blank">TAAS</a></p>

<p>Once provisioned, uninstall the following plugin:</p>

<ul>
  <li>GitHub Pull Requestor Plugin (known security issue)</li>
</ul>

<p>If you are unfamiliar, review DSL pipeline scripting via “declarative pipelines”</p>

<p>Reference:</p>
<ul>
  <li><a href="https://pages.github.ibm.com/TAAS/tools_guide/jenkins/job-types/creating-jenkinsfiles.html" target="_blank">https://pages.github.ibm.com/TAAS/tools_guide/jenkins/job-types/creating-jenkinsfiles.html</a></li>
</ul>

<p>Configure your Jenkins pipeline per <a href="https://github.ibm.com/Cloud-DevOps-Transformation-Services/demo-jenkins-pipeline/blob/master/README.md" target="_blank">these instructions</a>.</p>

<p><span style="color:red"><em>EDITORIAL</em> <strong>TODO:</strong></span></p>

<p><span style="color:red"><em><strong>Fully document Jira/Xray plugin integration with Jenkins once a hosted Jira environment is available.</strong></em></span></p>

<p>Jenkins plugins:</p>
<ul>
  <li><a href="https://wiki.jenkins.io/display/JENKINS/JiraTestResultReporter-plugin" target="_blank">https://wiki.jenkins.io/display/JENKINS/JiraTestResultReporter-plugin</a></li>
  <li><a href="https://plugins.jenkins.io/JiraTestResultReporter" target="_blank">https://plugins.jenkins.io/JiraTestResultReporter</a></li>
</ul>

<h3 id="integrating-xray-with-travis-ci">Integrating Xray with Travis CI</h3>

<p>In addition to Jenkins, the Xray plugin for Jira can also be used to integrate with Travis CI to automate testing jobs</p>
<h4 id="travis-ci-workflow">Travis CI Workflow</h4>

<p><em><strong>Important:</strong></em> Use only spaces (versus tabs) for indenting in the context of requirements.txt or .travis.yml files to ensure proper run-time interpretation and for editor portability</p>

<p><strong>Pre-requisites:</strong>
Requirements.txt file, to track any test dependencies. Reference:</p>
<ul>
  <li><a href="https://pip.pypa.io/en/stable/reference/pip_install/#requirements-file-format" target="_blank">https://pip.pypa.io/en/stable/reference/pip_install/#requirements-file-format</a></li>
</ul>

<p>Example requirements.txt content:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#Travis CI Selenium and Python test dependencies for Jira-Xray integration

#python3-pip
selenium
sauceclient
</code></pre></div></div>

<p>Example .travis.yml file to install any required dependencies and to call your automated
test.</p>

<p>Reference: <a href="https://docs.travis-ci.com/user/tutorial/" target="_blank">https://docs.travis-ci.com/user/tutorial/</a></p>

<p>Example content:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>language: python
python:
    - "2.7"
install:
    - pip install -r requirements.txt
script:
    - python jira/jira-xray/uitests/GitHubNavigation.py
</code></pre></div></div>

<p>With your test script and prerequisites in place:</p>

<ol>
  <li>Create Xray automated test type associated with its requisite Jira requirement.</li>
  <li>Manage your Xray tests to its associated Xray test plan repository to keep them organized.</li>
  <li>Manage your test case source code in github.ibm.com.</li>
  <li>Configure Travis CI to scan your github.ibm.com repos and toggle on whichever one(s) you need to test with.</li>
  <li>Once your test is done executing you can export your xml results back to your Xray test in Jira for reporting.</li>
</ol>


    

    
  </section>

      </main>
      <aside class="sidebar app-chrome__sidebar">
  <div class="sidebar__container">
    





  
  

  
    <div class="sidebar__group links js__collapsible">
      <h3 class="links__heading u-icon u-icon--before u-icon--compass">
        Watson Health Tools
      </h3>
      <ul class="links__list">
        
        
          
            
            <li class="links__list-item">
                <a href="/tools/jira/index/"
                   class="links__link ">
                    Jira
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/aha/index/"
                   class="links__link ">
                    Aha! - New Offerings Start Here
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/ca/index/"
                   class="links__link ">
                    Cognitive Architect
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/github/index/"
                   class="links__link ">
                    GitHub Enterprise
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/xray/index/"
                   class="links__link ">
                    Xray Test Management
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/confluence/index/"
                   class="links__link ">
                    Confluence
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/box/index/"
                   class="links__link ">
                    Box
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/slack/index/"
                   class="links__link ">
                    Slack
                </a>
            </li>
          
        
      </ul>
    </div>
  


  
  

  
    <div class="sidebar__group links js__collapsible">
      <h3 class="links__heading u-icon u-icon--before u-icon--info">
        WH Resources
      </h3>
      <ul class="links__list">
        
          
            <li class="links__list-item">
                <a target="_blank" href="https://w3-connections.ibm.com/communities/service/html/communityoverview?communityUuid=902efee5-3b0e-4cc3-890f-5b4ba4192f58" class="links__link">
                    Community
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://w3-connections.ibm.com/blogs/902efee5-3b0e-4cc3-890f-5b4ba4192f58?lang=en_us" class="links__link">
                    Blog
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://watsonbrandtool.mybluemix.net/" class="links__link">
                    Brand
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://pages.github.ibm.com/Watson-Health/design-system/index.html" class="links__link">
                    WH Design Pattern & Asset Library
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W6a642739bb36_44d9_90cd_f2ec86efebbe/page/Training%20%26%20Document%20Control" class="links__link">
                    WH Compliance Training wiki
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://pages.github.ibm.com/wh-ops/wh-ops-playbook/" class="links__link">
                    Watson Health Operations playbook
                </a>
            </li>
          
        
        
          
            
            <li class="links__list-item">
                <a href="/support/wh-glossary/"
                   class="links__link ">
                    Glossary
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/support/onboarding/"
                   class="links__link ">
                    WH New Hire Onboarding
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/index/"
                   class="links__link ">
                    Tools & Resources Guide...
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/compliance/regulatory-considerations/"
                   class="links__link ">
                    Regulatory Considerations
                </a>
            </li>
          
        
      </ul>
    </div>
  


  
  

  
    <div class="sidebar__group links js__collapsible">
      <h3 class="links__heading u-icon u-icon--before u-icon--info">
        About The WH Playbook
      </h3>
      <ul class="links__list">
        
        
          
            
            <li class="links__list-item">
                <a href="/about/index/"
                   class="links__link ">
                    About us...
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/about/nav/"
                   class="links__link ">
                    How to navigate...
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/about/faq/"
                   class="links__link ">
                    FAQ
                </a>
            </li>
          
        
      </ul>
    </div>
  


  </div>
</aside>

    </div>
    <div class="docs-lightbox docs-lightbox--disabled">
  <div class="docs-lightbox__image-wrap">
    <img class="docs-lightbox__image" src="" alt="">
  </div>
  <a class="docs-lightbox__close-btn" href="#close">close</a>
</div>

    <script src="/assets/js/main.min.js"></script>
    
    <script>
      document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
      ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/js/imageMapResizer.min.js"></script>
    <script>$('map').imageMapResize();</script>
  </body>
</html>
