<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width,minimum-scale=1,initial-scale=1">
    <title>Watson Health Playbook</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/assets/img/favicon/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/img/favicon/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/assets/img/favicon/manifest.json">
    <link rel="mask-icon" href="/assets/img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/assets/img/favicon/favicon.ico">
    <meta name="msapplication-config" content="/assets/img/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/assets/css/main.css"></link>
    <link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">

  </head>
  <body>
    <div class="disclaimer">
      Jira, Confluence, Xray and Aha workflows are still being developed and are not production ready yet. Training on tools and process will be made available when ready.
    </div>
    <div class="app-chrome">
      <header class="app-chrome__header">
        <a href="/"
           class="logo"
           rel="home">
          <img src="/assets/img/playbook-logo-white-transparent.png"
               alt="The Watson Health Playbook"
               class="logo__image"><span class="logo__text">Watson Health Playbook</span>
        </a>
      </header>
      <main class="content app-chrome__main-content">
        <nav class="content__nav">
            <a class="content__nav-link u-icon u-icon--before u-icon--search"
            href="/search.html">
              Search
            </a>
          <a class="content__nav-link u-icon u-icon--before u-icon--bug" target="_blank"
             href="https://github.ibm.com/watson-health-playbook/watson-health-playbook.github.ibm.com/issues/new?title=%3Creplace%20with%20a%20description%3E&body=Description:%0A%0ASteps%20to%20Reproduce:%0A%0A%0A%0ABrowser:%0A%0AOS:%0A%0A%0A%0A%23playbook-bug&labels[]=bug">
            Report an Issue or provide Feedback
          </a>
          <!--
          <a class="content__nav-link u-icon u-icon--before u-icon--pencil" target="_blank"
             href="https://github.ibm.com/watson-health-playbook/watson-health-playbook.github.ibm.com/edit/master/_content/tools/github/github_configcommitmsg.md">
            Propose a Change
          </a>
        -->

          <a class="content__nav-link u-icon u-icon--before u-icon--thumbs-up"
             href="/nps/get-nps">
            How are we doing?
          </a>
        </nav>
          


  
  
  
    
  
    
  
    
  

  
  








<header class="content__header">
  <!-- <p class="content__section"></p> -->
  <h1 class="content__heading">Configuring Git Commit Message Prompts</h1>
  <div class="breadcrumb">
    <div id="breadcrumbs">
<!-- Grab the current full path and split it up -->


<!-- Don't put the "Top" tag on the root page, it isn't needed -->

<a href="/">Top</a>



  
  <!-- otherwise, create the crumb list -->
    / <a href="/tools/">tools</a>
  

  
  <!-- otherwise, create the crumb list -->
    / <a href="/tools/github/">github</a>
  

  
    <!-- If a breadcrumb exists, then use that always -->
    
      / Configuring Git Commit Message Prompts
    
  

</div>

  </div>
</header>

  <section class="content__body-text">
    <h1 id="draft">DRAFT</h1>

<h2 id="before-you-begin">Before You Begin</h2>
<p>Watson Health development teams require the ability to reliably associate their source code commits to repositories hosted at <a href="https://github.ibm.com/" target="_blank">github.ibm.com</a> with issues managed in their respective Jira Development and Test projects.</p>

<p>The IBM hosted <a href="https://github.ibm.com/" target="_blank">github.ibm.com</a>  environment does not offer server-side hook support for operations, such as those associated with Git commit formatting standards.  Therefore, it is the responsibility of Watson Health development teams working in the <a href="https://github.ibm.com/" target="_blank">github.ibm.com</a> environment to self-manage their Git repositories and the commit procedures for those repositories.</p>

<p>This topic describes options available for Watson Health development teams to configure local Git repository commit procedures. Review the techniques for referencing the correct Jira Issue ID when commits are made.</p>

<p>Options 1 and 2 are relevant when using the Git command line client and Option 3 is relevant when working exclusively in Eclipse. Option 1 is relevant for all development environments.</p>

<p><strong>Applicable Role:</strong>  WH Developer</p>

<h2 id="option-1--creating-a-local-git-repository-hook-recommended-in-all-development-environments">Option 1:  Creating a local Git repository hook (<em>Recommended in all development environments</em>)</h2>

<p>Option 1 describes how to implement a local Git repository hook. For each repository that a user loads locally to their workstation, they will install a <code class="highlighter-rouge">prepare-commit-msg</code> hook to programmatically enforce the following comment standard:</p>

<p><code class="highlighter-rouge"> &lt;Jira-Issue-ID&gt; "comment describing change" </code></p>

<h3 id="example">Example:</h3>
<p><code class="highlighter-rouge">WOSD-23 change to implement new functionality</code></p>

<h3 id="dependencies">Dependencies</h3>
<ol>
  <li>You must manually create a <code class="highlighter-rouge">prepare-commit-msg</code> hook in each local Git repository you are working with.</li>
  <li>Private branch names must be named identically to the Jira issue you are working on; for example: <code class="highlighter-rouge">WHDD-40</code>.</li>
  <li>
    <p>You must complete your commits from the command line using the following syntax:</p>

    <p><code class="highlighter-rouge">git commit -m "comment describing change"</code></p>

    <p>Example:</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Lewiss-MacBook-Pro:test1 lewiswhite$ vi test1.md
 Lewiss-MacBook-Pro:test1 lewiswhite$ git add test1.md
 Lewiss-MacBook-Pro:test1 lewiswhite$ git commit -m "auto prepend branch name"
 [WHDD-40 a005078] WHDD-40 auto prepend branch name
  1 file changed, 1 insertion(+)
</code></pre></div>    </div>
    <p><br />
 The resulting commit message which identifies the commit with the specified Jira Issue ID is as follows:<br /></p>

    <p><code class="highlighter-rouge">[WHDD-40 a005078] WHDD-40 auto prepend branch name</code></p>
  </li>
</ol>

<h3 id="procedure">Procedure</h3>
<ol>
  <li>Manually create a <code class="highlighter-rouge">prepare-commit-msg</code> hook in each local Git repository you are working with.</li>
  <li>For each local repository that you are working with, create a private branch named identical to the Jira Issue ID you are working on; for example: <code class="highlighter-rouge">WHDD-40</code>.</li>
  <li>
    <p>Create a file in your <code class="highlighter-rouge">hooks</code> directory named <code class="highlighter-rouge">prepare-commit-msg</code>.
 <img src="https://pages.github.ibm.com/watson-health-playbook/resources/images/tools/github/git_create_preparecommitmsg.png" alt="Create prepare-commit-msg file" title="Create prepare-commit-msg file" /></p>
  </li>
  <li>
    <p>Populate the file with the following hook script content:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">#!/bin/bash</span>

 <span class="c"># This is how you can customize which branches should be</span>
 <span class="c"># skipped when prepending a commit message.</span>

 <span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$BRANCHES_TO_SKIP</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
   </span><span class="nv">BRANCHES_TO_SKIP</span><span class="o">=(</span>master develop <span class="nb">test</span><span class="o">)</span>
 <span class="k">fi

 </span><span class="nv">BRANCH_NAME</span><span class="o">=</span><span class="k">$(</span>git symbolic-ref <span class="nt">--short</span> HEAD<span class="k">)</span>
 <span class="nv">BRANCH_NAME</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">BRANCH_NAME</span><span class="p">##*/</span><span class="k">}</span><span class="s2">"</span>

 <span class="nv">BRANCH_EXCLUDED</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span> <span class="s2">"%s</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"</span><span class="k">${</span><span class="nv">BRANCHES_TO_SKIP</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-c</span> <span class="s2">"^</span><span class="nv">$BRANCH_NAME</span><span class="s2">$"</span><span class="k">)</span>
 <span class="nv">BRANCH_IN_COMMIT</span><span class="o">=</span><span class="k">$(</span><span class="nb">grep</span> <span class="nt">-c</span> <span class="s2">"</span><span class="se">\[</span><span class="nv">$BRANCH_NAME</span><span class="se">\]</span><span class="s2">"</span> <span class="nv">$1</span><span class="k">)</span>

 <span class="k">if</span> <span class="o">[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$BRANCH_NAME</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="o">[[</span> <span class="nv">$BRANCH_EXCLUDED</span> <span class="nt">-eq</span> 1 <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="o">[[</span> <span class="nv">$BRANCH_IN_COMMIT</span> <span class="nt">-ge</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
   </span><span class="nb">sed</span> <span class="nt">-i</span>.bak <span class="nt">-e</span> <span class="s2">"1s/^/</span><span class="nv">$BRANCH_NAME</span><span class="s2"> /"</span> <span class="nv">$1</span>
 <span class="k">fi</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
  <li>
    <p>Now that the hook script is created, issue the following command from the command line to execute the hook:<br /></p>

    <p><code class="highlighter-rouge">chmod u+x .git/hooks/prepare-commit-msg</code>.</p>
  </li>
  <li>
    <p>To use the hook, perform your Git commits from the command line; for example:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Lewiss-MacBook-Pro:test1 lewiswhite$ vi test1.md
 Lewiss-MacBook-Pro:test1 lewiswhite$ git add test1.md
 Lewiss-MacBook-Pro:test1 lewiswhite$ git commit -m "auto prepend branch name"
 [WHDD-40 a005078] WHDD-40 auto prepend branch name (resulting commit message)
  1 file changed, 1 insertion(+)
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="option-2-creating-custom-commit-messages-for-command-line-commits">Option 2: Creating custom commit messages for Command Line Commits</h2>

<p>Use the Git <code class="highlighter-rouge">commit.template</code> custom commit template to provide a customized reminder of the proper format and style when creating a commit message.  Using this custom commit function provides a prompt when running the <code class="highlighter-rouge">git commit-m</code> command to use the proper format.</p>

<p>Complete the following client-side implementation to create the custom commit message.</p>

<h3 id="procedure-1">Procedure</h3>
<ol>
  <li>Create a file named <code class="highlighter-rouge">.gitmessage.txt</code> and add the file to your user <code class="highlighter-rouge">home</code> directory.</li>
  <li>
    <p>Populate the gitmessage file with the following content:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> WH Development commit format:
 &lt;Jira_Issue_ID&gt; what changed in less than 50 characters
 Ex: "WHDD-40 app install path change"
</code></pre></div>    </div>
  </li>
  <li>
    <p>Issue the following command from the command line to set the <code class="highlighter-rouge">commit.template</code> path to the location of the <code class="highlighter-rouge">.gitmessage.txt</code> file:<br /></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git config --global commit.template \~/.gitmessage.txt
</code></pre></div>    </div>
    <p><br />
 Sample commit message prompt:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> WH Development commit format:
 &lt;Jira_Issue_ID&gt; what changed in less than 50 characters
 Ex: "WHDD-40 app install path change"
</code></pre></div>    </div>
    <p><br />
 For additional information, reference: <a href="&lt;https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration" target="_blank">Customizing Git - Git Configuration</a></p>
  </li>
</ol>

<h2 id="option-3--creating-local-dictionary-file-for-git-commits-from-eclipse">Option 3:  Creating local dictionary file for Git Commits from Eclipse</h2>

<p>When using Eclipse for Git commits, use a local dictionary file to help ensure that your Git commits are associated with the correct Jira Issue ID.</p>

<h3 id="procedure-2">Procedure</h3>
<ol>
  <li>
    <p>Create a local user dictionary text file, with the filename, <code class="highlighter-rouge">userdictionary.txt</code>,  and put this file in your user <code class="highlighter-rouge">home</code> directory.  This file acts as a spell-checker to ensure that the Jira Issue ID associated with your Git commits via Eclipse are properly spelled.</p>
  </li>
  <li>
    <p>At minimum, add your Jira project keys to the dictionary text file. By adding your Jira project keys to the dictionary file, the system will prompt you if there are misspellings of the Jira Issue ID in your Git commit.</p>

    <p>For example, the Jira project keys for the Watson for Oncology project development and test areas are <code class="highlighter-rouge">WOSD</code> and <code class="highlighter-rouge">WOST</code>, respectively. By adding the Jira project keys <code class="highlighter-rouge">WOSD</code> and <code class="highlighter-rouge">WOST</code> to your local user dictionary file, you will receive a prompt on your Git commit if you misspelled the Jira Issue ID.</p>

    <p>Once implemented, use <code class="highlighter-rouge">CNTRL +1</code> on Windows or <code class="highlighter-rouge">COMMAND +1</code> on the Mac which offers auto correct options, as depicted in the following illustration:<br />
 <img src="https://pages.github.ibm.com/watson-health-playbook/resources/images/tools/github/git_exampleautocorrectoptions.png" alt="Example Auto correct options" title="Example Auto correct options" /></p>
  </li>
  <li>
    <p>Once your <code class="highlighter-rouge">userdictionary.txt</code> file is created in your <code class="highlighter-rouge">home</code> directory, from Eclipse, select <strong>Eclipse &gt; Preferences</strong>. <br />
 <img src="https://pages.github.ibm.com/watson-health-playbook/resources/images/tools/github/git_eclipsepreferences.png" alt="Select Eclipse &gt; Preferences" title="Select Eclipse &gt; Preferences" /></p>
  </li>
  <li>
    <p>Expand <strong>General-&gt;Editors-&gt;Test Editors</strong>, then select <strong>Spelling</strong><br />
 <img src="https://pages.github.ibm.com/watson-health-playbook/resources/images/tools/github/git_spellingtesteditor.png" alt="Spelling Test Editor" title="Spelling Test Editor" /></p>

    <p>a. In Spelling preferences, clear the selection of (deselect) the following:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Ignore words with digits
 Ignore upper case words
</code></pre></div>    </div>
    <p><br />
 b. Browse for and select your User defined dictionary.</p>

    <p>c. Click <strong>Apply and Close</strong>.<br />
     <img src="https://pages.github.ibm.com/watson-health-playbook/resources/images/tools/github/git_changespellingpreferences.png" alt="Change Spelling preferences" title="Change Spelling preferences" /></p>
  </li>
</ol>


    

    
  </section>

      </main>
      <aside class="sidebar app-chrome__sidebar">
  <div class="sidebar__container">
    





  
  

  
    <div class="sidebar__group links js__collapsible">
      <h3 class="links__heading u-icon u-icon--before u-icon--compass">
        Watson Health Tools
      </h3>
      <ul class="links__list">
        
        
          
            
            <li class="links__list-item">
                <a href="/tools/jira/index/"
                   class="links__link ">
                    Jira
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/aha/index/"
                   class="links__link ">
                    Aha! - New Offerings Start Here
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/ca/index/"
                   class="links__link ">
                    Cognitive Architect
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/github/index/"
                   class="links__link ">
                    GitHub Enterprise
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/xray/index/"
                   class="links__link ">
                    Xray Test Management
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/confluence/index/"
                   class="links__link ">
                    Confluence
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/box/index/"
                   class="links__link ">
                    Box
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/slack/index/"
                   class="links__link ">
                    Slack
                </a>
            </li>
          
        
      </ul>
    </div>
  


  
  

  
    <div class="sidebar__group links js__collapsible">
      <h3 class="links__heading u-icon u-icon--before u-icon--info">
        WH Resources
      </h3>
      <ul class="links__list">
        
          
            <li class="links__list-item">
                <a target="_blank" href="https://w3-connections.ibm.com/communities/service/html/communityoverview?communityUuid=902efee5-3b0e-4cc3-890f-5b4ba4192f58" class="links__link">
                    Community
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://w3-connections.ibm.com/blogs/902efee5-3b0e-4cc3-890f-5b4ba4192f58?lang=en_us" class="links__link">
                    Blog
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://watsonbrandtool.mybluemix.net/" class="links__link">
                    Brand
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://pages.github.ibm.com/Watson-Health/design-system/index.html" class="links__link">
                    WH Design Pattern & Asset Library
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://apps.na.collabserv.com/wikis/home?lang=en-us#!/wiki/W6a642739bb36_44d9_90cd_f2ec86efebbe/page/Training%20%26%20Document%20Control" class="links__link">
                    WH Compliance Training wiki
                </a>
            </li>
          
            <li class="links__list-item">
                <a target="_blank" href="https://pages.github.ibm.com/wh-ops/wh-ops-playbook/" class="links__link">
                    Watson Health Operations playbook
                </a>
            </li>
          
        
        
          
            
            <li class="links__list-item">
                <a href="/support/wh-glossary/"
                   class="links__link ">
                    Glossary
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/support/onboarding/"
                   class="links__link ">
                    WH New Hire Onboarding
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/tools/index/"
                   class="links__link ">
                    Tools & Resources Guide...
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/compliance/regulatory-considerations/"
                   class="links__link ">
                    Regulatory Considerations
                </a>
            </li>
          
        
      </ul>
    </div>
  


  
  

  
    <div class="sidebar__group links js__collapsible">
      <h3 class="links__heading u-icon u-icon--before u-icon--info">
        About The WH Playbook
      </h3>
      <ul class="links__list">
        
        
          
            
            <li class="links__list-item">
                <a href="/about/index/"
                   class="links__link ">
                    About us...
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/about/nav/"
                   class="links__link ">
                    How to navigate...
                </a>
            </li>
          
            
            <li class="links__list-item">
                <a href="/about/faq/"
                   class="links__link ">
                    FAQ
                </a>
            </li>
          
        
      </ul>
    </div>
  


  </div>
</aside>

    </div>
    <div class="docs-lightbox docs-lightbox--disabled">
  <div class="docs-lightbox__image-wrap">
    <img class="docs-lightbox__image" src="" alt="">
  </div>
  <a class="docs-lightbox__close-btn" href="#close">close</a>
</div>

    <script src="/assets/js/main.min.js"></script>
    
    <script>
      document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] +
      ':35729/livereload.js?snipver=1"></' + 'script>')
    </script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/js/imageMapResizer.min.js"></script>
    <script>$('map').imageMapResize();</script>
  </body>
</html>
